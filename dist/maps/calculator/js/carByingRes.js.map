{"version":3,"sources":["calculator/js/carByingRes.js"],"names":["$","document","ready","r","_params","JSON","parse","RegExp","reg","getQueryString","name","substr","match","window","location","carByingRes","this","recalculation","carPrice","downpayment","lendingRate","Math","pow","loanTerm","_monthlyPayment","_totalLoan","_totalInterest","_firstPayment","licenseFee","carTax","_necessaryCost","_total","$detail","$summary","text","formatMoney","children","find","on","init"],"mappings":"aAAAA,EAAEC,UAAUC,MAAM,WAOd,IAPFD,EACAE,EAMEC,EAAAC,KAAAC,OAPFL,EAAUC,IAAMK,OAAA,QAOd,SAPwB,gBAAA,KAEpBC,OADNL,EAASM,OAAAA,SAAeC,OAAMC,OAAA,GAAAC,MAAAJ,IAEpBK,SAAOC,EAAAA,IAEX,OAWNC,GAGAA,KAAmB,WADfA,GACJA,KAAAA,YAEIC,KAAAC,iBAEFF,UAAA,WAEFA,IAAAA,EAAwBX,EAAAc,UAAW,EAAAd,EAAAe,YAAA,MAAAf,EAAAgB,YAAA,IAAA,IAAAC,KAAAC,IAAA,EAAAlB,EAAAgB,YAAA,IAAA,GAAAhB,EAAAmB,WAAAF,KAAAC,IAAA,EAAAlB,EAAAgB,YAAA,IAAA,GAAAhB,EAAAmB,UAAA,GAE7BC,EAAAA,EAAmBpB,UAAQc,EAAad,EAAKA,YAAQe,KAErDM,EAAarB,EAAoBA,EAAKA,SAAQe,EAAjCD,UAAjB,EAAAd,EAAAe,YAAA,KAEIO,EAAAA,EAAiBF,UAAkBpB,EAAQmB,YAAWnB,KAEtDuB,EAAgBvB,OAAQc,EAARU,YAA4BT,OAAAA,EAA5BU,QAEhBC,EAAAA,EAAwB1B,OAAQwB,EAAAA,UAAqBxB,EAErD2B,EAASD,EAAAA,YAGTE,EAAShC,EAAE,WADfiC,EAAIA,KAAAA,iBAAJC,KAAAC,YAAAX,GAAA,KACAS,EAAID,KAAShC,SAAEkC,KAAf,IAAA9B,EAAAmB,SAAA,MACAU,EAAAA,KAAA,cAAcG,SAAyBD,QAAAA,KAAYX,YAAAA,IACnDS,EAAAA,KAAA,kBAAAG,SAAgChC,QAAQmB,KAAAA,YAAxCI,EAAAG,IACAE,EAAQK,KAAK,iBAAcD,SAAS,QAAQF,KAAKC,YAAYV,IAC7DO,EAAQK,KAAK,kBAAkBD,SAAS,QAAQF,KAAKC,YAAYR,IACjEK,EAAQK,KAAK,kBAAiBD,SAAS,QAAQF,KAAKC,YAAYR,IAChEK,EAAAA,UAAAI,SAAa,QAAbF,KAA+BE,YAA/BL,KAEA/B,cAAqB,WAvBvBA,EAAA,WAAAsC,GAAA,QAAA,WAyBAvB,OAAAA,QAAYE,WAGTF,EAFDwB","file":"../../../calculator/js/carByingRes.js","sourcesContent":["$(document).ready(function(){\n  function getQueryString(name) {\n    var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');\n    var r = window.location.search.substr(1).match(reg);\n    if (r != null) {\n        return unescape(r[2]);\n    }\n    return null;\n  }\n  var _params = JSON.parse(getQueryString('params'));\n\n  // carPrice: 0, // 购车金额\n  // downpayment: 0, // 首付比例\n  // loanTerm: 36, // 贷款期限（月数）\n  // lendingRate: 0, // 贷款利率\n  // licenseFee: 0, // 上牌费\n  // carTax: 420, // 车船税\n\n  var carByingRes = {};\n  carByingRes.init = function() {\n    if (_params) {\n      this.calculate(); // 计算\n    }\n    this.recalculation();\n  };\n  carByingRes.calculate = function() {\n    // 月供金额\n    var _monthlyPayment = (_params.carPrice * ( 1 - (_params.downpayment / 100)) * ((_params.lendingRate / 100) / 12) * Math.pow((1 + ((_params.lendingRate / 100) / 12)), _params.loanTerm)) / (Math.pow((1 + ((_params.lendingRate / 100) / 12)),_params.loanTerm) - 1);\n    // 贷款总额\n    var _totalLoan = _params.carPrice * (1 - (_params.downpayment / 100));\n    // 利息总额\n    var _totalInterest = _monthlyPayment * _params.loanTerm - _params.carPrice * (1 - (_params.downpayment / 100));\n    // 首付\n    var _firstPayment = _params.carPrice * (_params.downpayment / 100);\n    // 必要花费\n    var _necessaryCost = Number(_params.licenseFee) + Number(_params.carTax);\n    // 总共费用\n    var _total = _necessaryCost + Number(_params.carPrice) + _totalInterest;\n\n    var $summary= $('.summary');\n    var $detail= $('.detail');\n    $summary.find('.summaryMoney').text(`${formatMoney(_monthlyPayment)}元`);\n    $summary.find('.term').text(`（${_params.loanTerm}期）`);\n    $detail.find('.totalLoan').children('span').text(formatMoney(_totalLoan));\n    $detail.find('.firstPayTotal').children('span').text(formatMoney(_firstPayment + _necessaryCost));\n    $detail.find('.firstPayment').children('span').text(formatMoney(_firstPayment));\n    $detail.find('.necessaryCost').children('span').text(formatMoney(_necessaryCost));\n    $detail.find('.totalInterest').children('span').text(formatMoney(_totalInterest));\n    $('.total').children('span').text(formatMoney(_total));\n  }\n  carByingRes.recalculation = function() {\n    $('#submit').on('click',function() {\n      window.history.back();\n    })\n  }\n  carByingRes.init();\n\n});"]}