{"version":3,"sources":["calculator/js/interest.js"],"names":["$","document","ready","resultData","lendingRateType","loanTerm","loanAccount","interest","this","repaymentMethod","lendingRate","$loanTerm","i","_dataYear","text","_monthData","j","_picker","Picker","data","title","on","selectedVal","selectedIndex","_term","_innerText","show","$repaymentMethod","value","_data","$lendingRate","find","$lendingRatePop","$interestType","removeClass","$cancel","e","addClass","$confirm","lendingRateNum","val","siblings","index","handleInput","$input","$this","attr","submit","$submit","alert","window","location","href","JSON","stringify","init"],"mappings":"aAAAA,EAAEC,UAAUC,MAAM,WAChB,IAAIC,GADJF,SAAUC,EACVE,gBAAiB,EACfC,gBADe,EAEfD,YAAAA,GAEAE,GAJeC,KAAjB,WAMAC,KAAID,WACJA,KAAAA,kBACEC,KAAKH,cACLG,KAAKC,SACLD,KAAKE,eAELH,SAAA,WAIA,IATF,IAAAI,EAAAX,EAAA,aAQMW,KACJC,EAAA,EAAAA,GAAA,GAAAA,IACAC,EAAIA,MACJC,KAAaF,EAAb,IACEC,MAAAA,IAID,IAJgB,IAAfE,KAIDC,EAAA,EAAAA,GAAA,GAAAA,IACDD,EAAIA,MACJD,KAAaE,EAAb,IACED,MAAAA,IAID,IAAAE,EAAA,IAAAC,QACDC,MAAAN,EAAAE,GACAK,MAAIH,SAAqBA,EAAzBI,GAAA,qBAAA,SAAAC,EAAAC,GAIA,IAAAC,EAAA,GAAAF,EAAA,GAAAA,EAAA,GACAL,EAAAA,GAAWJ,EAAXU,EAA2CD,IAAAA,KAAaC,EAAAA,EAAe,IAAAT,KAAvEG,KAAuEO,EAAvEP,KACEd,EAAIqB,SAAQF,EACZX,EAAIc,KAAAA,UAAgBZ,KAAAA,KAGrBF,EALDU,GAAA,QAAA,WAQEJ,EAAQS,UACTnB,gBAFD,WA9BF,IAAAoB,EAAA3B,EAAA,oBAkCAO,IACEO,KAAIa,OACJC,MAAIC,IAEFD,KAAAA,OAFUA,MAGT,IAHHX,EAAA,IAAAC,QAOAC,MAAAU,GACAN,eAAkBL,GAChBC,MAAOU,SADgBZ,EAAzBI,GAAA,qBAAA,SAAAC,EAAAC,GAKA,IAAAE,EAAAA,GAAAI,EAAAN,EAAA,IAAAT,KACAG,EAAWR,gBAAXc,EAA2CD,GACzCK,EAAIF,KAAgBI,UAAMN,KAAAA,KAG3BI,EAJDN,GAAA,QAAA,WAOEJ,EAAQS,UACTnB,YAFD,WAtBF,IAAAuB,EAAA9B,EAAA,gBA0BAO,EAAuBP,EAAA,mBACjB8B,EAAe9B,EAAnB+B,KAAA,iBACIC,EAAAA,EAAoBD,KAAA,WACpBE,EAAAA,EAAgBD,KAAgBD,YAErBC,EAAAA,qBAGShC,EAAE,qBAG1B8B,EAAaT,GAAG,QAAS,WADzBW,EAAAE,YAAA,UAGCC,EAFDd,GAAA,QAAA,SAAAe,GAGAJ,EAAAK,SAAA,UAGCC,EAFDjB,GAAA,QAAA,SAAAe,GAKEJ,GAFFA,EAAAK,SAAA,QACAC,EAAYC,eAASvC,EAAA,mBAAYwC,MAC/BR,EAAAA,eAAA,CACA7B,IAAAA,EAAWoC,EAAmBA,eAA9BpC,MAA4BA,EAA5BC,gBAAA,IAAA,KAAAD,IACA2B,EAAeS,KAAAA,UAAfzB,KAA+BW,MAIhCQ,EAPDZ,GAAA,QAAA,WAQArB,EAAAQ,MAAA6B,SAAA,WAAAI,WAAAP,YAAA,WACAD,EAAAA,gBAA0BjC,EAAAQ,MAAWkC,WAGpCnC,YAHD,WA5BFP,EAAA,QAAA+B,KAAA,SAiCSY,GAAAA,QAAT,WACE,IAAIC,EAAS5C,EAAEQ,MACfoC,EAAUC,EAAVC,KAAmB,MACjB3C,EAAI0C,GAAQA,EAAZL,SAGDjC,OAJD,WAFFP,EAAA,WAQS+C,GAAAA,QAAS,YACZC,EAAY1C,aAAhBH,EAAAG,aAAA,EACA0C,MAAA,kBAGI7C,EAAAE,UAIAF,EAAAoC,gBAAApC,EAAAoC,gBAAA,GAAApC,EAAAoC,gBAAA,IACDU,MAAA,sBAGCC,OAAAC,SAAAC,KAAA,iEAAAC,KAAAC,UAAAnD,GAPD8C,MAAA,eAWJ1C,EAjBDgD","file":"../../../calculator/js/interest.js","sourcesContent":["$(document).ready(function(){\n  var resultData = {\n    loanTerm: 0,\n    lendingRateType: 0,\n    repaymentMethod: 0,\n    loanAccount: 0,\n  };\n  var interest = {};\n  interest.init = function() {\n    this.loanTerm(); // 贷款期限\n    this.repaymentMethod(); // 还款方式\n    this.lendingRate();\n    this.submit();\n    this.handleInput();\n  };\n  interest.loanTerm = function() {\n    var $loanTerm = $('#loanTerm');\n    // 初始化年月数据\n    var _dataYear = [];\n    for (var i = 1; i <=25; i++) {\n      _dataYear.push({\n        text: `${i}年`,\n        value: i,\n      })\n    }\n    var _monthData = [];\n    for (var j = 0; j <= 12; j++) {\n      _monthData.push({\n        text: `${j}月`,\n        value: j,\n      })\n    }\n    // 初始化picker\n    var _picker = new Picker({\n      data: [_dataYear, _monthData],\n      title: '贷款期限'\n    });\n    // 用户选择值改变\n    _picker.on('picker.valuechange', function (selectedVal, selectedIndex) {\n      var _term = selectedVal[0] * 12 + selectedVal[1];\n      var _innerText = `${_dataYear[selectedIndex[0]].text}${_monthData[selectedIndex[1]].text} (${_term}期)`;\n      resultData.loanTerm = _term;\n      $loanTerm.find('.value').text(_innerText);\n    });\n\n    $loanTerm.on('click', function () {\n      _picker.show();\n    });\n  };\n  interest.repaymentMethod = function() {\n    var $repaymentMethod = $('#repaymentMethod');\n    var _data = [{\n      text: '等额本金',\n      value: 0,\n    }, {\n      text: '等额本息',\n      value: 1,\n    }]\n    // 初始化picker\n    var _picker = new Picker({\n      data: [_data],\n      selectedIndex: [0],\n      title: '还款方式'\n    });\n    // 用户选择值改变\n    _picker.on('picker.valuechange', function (selectedVal, selectedIndex) {\n      var _innerText = `${_data[selectedIndex[0]].text}`;\n      resultData.repaymentMethod = selectedIndex[0];\n      $repaymentMethod.find('.value').text(_innerText);\n    });\n\n    $repaymentMethod.on('click', function () {\n      _picker.show();\n    });\n  };\n  interest.lendingRate = function() {\n    var $lendingRate = $('#lendingRate');\n    var $lendingRatePop = $('#lendingRatePop');\n    var $interestType = $lendingRatePop.find('.interestType');\n    var $cancel = $lendingRatePop.find('.cancel');\n    var $confirm = $lendingRatePop.find('.confirm');\n\n    var $lendingRateTerm1 = $('#lendingRateTerm1');\n    var $lendingRateTerm2 = $('#lendingRateTerm2');\n\n    // 点击输入弹窗出现\n    $lendingRate.on('click', function() {\n      $lendingRatePop.removeClass('none');\n    });\n    // 取消\n    $cancel.on('click', function(e) {\n      $lendingRatePop.addClass('none');\n    })\n    // 确定\n    $confirm.on('click', function(e) {\n      $lendingRatePop.addClass('none');\n      resultData.lendingRateNum = $('#lendingRateNum').val();\n      if (resultData.lendingRateNum) {\n        var _innerText = `${resultData.lendingRateNum}%(${resultData.lendingRateType ? '月' : '年'})`\n        $lendingRate.find('.value').text(_innerText);\n      }\n    })\n    // 利率类型\n    $interestType.on('click', function() {\n      $(this).addClass('checked').siblings().removeClass('checked');\n      resultData.lendingRateType = $(this).index();\n    })\n  };\n  interest.handleInput = function() {\n    var $input = $('.ipt').find('input');\n    $input.on('input', function() {\n      var $this = $(this);\n      var _id = $this.attr('id');\n      resultData[_id] = $this.val();\n    })\n  }\n  interest.submit = function() {\n    var $submit = $('#submit');\n    $submit.on('click', function() {\n      if (!resultData.loanAccount || resultData.loanAccount <= 0) {\n        alert('请输入贷款金额，大于0的整数');\n        return;\n      }\n      if (!resultData.loanTerm) {\n        alert('请选择贷款期限');\n        return;\n      }\n      if (!resultData.lendingRateNum || resultData.lendingRateNum <= 0 || resultData.lendingRateNum >= 100) {\n        alert('请输入贷款利率, 0-99.99之间');\n        return;\n      }\n      window.location.href=`http://192.168.104.66:3000/calculator/interestRes.html?params=${JSON.stringify(resultData)}`;\n    })\n  }\n\n  interest.init();\n});"]}