{"version":3,"sources":["calculator/js/wages.js"],"names":["$","document","ready","text","value","ssData","pfData","resultData","grossPay","taxThreshold","wages","this","init","ssBase","pfBase","$dom","data","selectedIndex","_innerText","setValue","that","$taxThreshold","_taxData","_picker","Picker","on","selectedVal","off","show","$ssBase","$pfBase","_ssHightest","_pfHightest","$grossPay","val","_val","_ssMini","_pfMini","submit","$submit","window","location","href","JSON","stringify"],"mappings":"aAAAA,EAAEC,UAAUC,MAAM,WAAhBD,IAAAA,IAGEE,KAAM,UADRC,MAAIC,IAEFD,KAAAA,UAFWA,MAGV,IAHHE,IASEH,KAAM,UADRC,MAAIE,IAEFF,KAAAA,UAFWA,MAGV,IAHHG,GASEC,SAAU,EADZC,aAAIF,KACFC,OAAAA,EACAC,OAAAA,GAFFC,GAQAA,KAAa,WADbC,KAAID,eACJA,KAAME,SACJD,KAAKF,SACLE,KAAKE,WACLF,KAAKG,UAELJ,SAAe,SAAAK,EAAAC,EAAAC,GALjB,IAAAC,EAAAA,GAAAF,EAAAC,EAAA,IAAAd,KAOAO,EAAMS,KAAAA,UAAWhB,KAASY,IAExBA,aAAA,WAFF,IAAAK,EAAAT,KAIMF,EAAeT,EAAA,iBACfoB,IACJjB,KAAIkB,aACJjB,MAAIkB,OAEFlB,KAAAA,YAFaA,MAGZ,OAHHmB,EAAA,IAAAC,QAOAR,MAAAM,GACAL,eAAkBO,GAChBR,MAAOM,UADgBC,EAAzBE,GAAA,qBAAA,SAAAC,EAAAT,GAKAG,EAAAD,SAAAE,EAAAC,EAAAL,GACAM,EAAWd,aAAAiB,EAAsB,KAGhCL,EAHDM,MAAAF,GAAA,QAAA,WAMEF,EAAQK,UACTlB,OAFD,WAtBF,IAAAU,EAAAT,KA0BME,EAASb,EAAA,WAET6B,EAAU7B,IAAEwB,QAChBR,MAAAX,GACAY,eAAkBO,GAChBR,MAAOX,SADgBkB,EAAzBE,GAAA,qBAAA,SAAAC,EAAAT,GAKAG,EAAAD,SAAAU,EAAAxB,EAAAY,GACAM,EAAWV,OAAAa,EAAsB,KAGhCG,EAHDF,MAAAF,GAAA,QAAA,WAMEF,EAAQK,UACTlB,OAFD,WAfF,IAAAU,EAAAT,KAmBMG,EAASd,EAAA,WAET8B,EAAU9B,IAAEwB,QAChBR,MAAAV,GACAW,eAAkBO,GAChBR,MAAOV,UADgBiB,EAAzBE,GAAA,qBAAA,SAAAC,EAAAT,GAKAG,EAAAD,SAAAW,EAAAxB,EAAAW,GACAM,EAAWT,OAAAY,EAAsB,KAGhCI,EAHDH,MAAAF,GAAA,QAAA,WAMEF,EAAQK,UACTlB,SAFD,WAfF,IAAAU,EAAAT,KAmBMH,EAAN,KACQY,EAAO,KAGTW,EAAc,aACdC,GAAAA,QAAc,WAClBzB,EAAI0B,SAAcjC,EAAAW,MAAlBuB,QACAD,GAAAA,OAAa,WACX1B,IAAAA,EAAWC,EAAAA,MAAX0B,MADF7B,IAGEF,KAAAA,WAAWgC,EAAAA,KAAXA,EAAAC,EAAAD,EARF,MAAA,MAQEA,EAAAC,GAAW,KAAX,IACA/B,MAAS,IAEPD,KAAAA,WAAO+B,EAAAA,UAAA,IAFA/B,MAGN,IAEDA,IALFD,KAAAA,WAAAgC,EAAAA,KAAAA,EAAAE,EAAAF,EARF,MAAA,MAQEA,EAAAE,GAAA,KAAA,IAOA/B,MAAS,IAEPF,KAAAA,WAAO+B,EAAAA,UAAA,IAFA/B,MAGN,IAEDA,EAAAA,SAFCgB,EAHHN,YASDJ,OApBD,WAPFV,EAAA,WA6BMsC,GAAN,QAAe,YACTC,EAAY/B,UAAhBD,EAAAC,UAAA,EACA+B,MAAA,kBAGIC,OAAAC,SAAAC,KAAA,wBAAAC,KAAAC,UAAArC,OAGHG,EANDE","file":"../../../calculator/js/wages.js","sourcesContent":["$(document).ready(function(){\n\n  var ssData = [{\n    text: '按统一标准缴纳',\n    value: 0,\n  }, {\n    text: '按最低标准缴纳',\n    value: 1,\n  }];\n\n  var pfData = [{\n    text: '按统一标准缴纳',\n    value: 0,\n  }, {\n    text: '按最低标准缴纳',\n    value: 1,\n  }];\n\n  var resultData = {\n    grossPay: 0,\n    taxThreshold: 3500,\n    ssBase: 0,\n    pfBase: 0,\n  };\n\n  var wages = {};\n  wages.init = function() {\n    this.taxThreshold(); // 个税起征点\n    this.ssBase(); // 社保基数\n    this.pfBase(); // 公积金基数\n    this.grossPay(); // 税前工资\n    this.submit(); // 提交\n  };\n  wages.setValue = function($dom, data, selectedIndex) {\n    var _innerText = `${data[selectedIndex[0]].text}`;\n    $dom.find('.value').text(_innerText);\n  }\n  wages.taxThreshold = function() {\n    var that = this;\n    var $taxThreshold = $('#taxThreshold');\n    var _taxData = [{\n      text: '非外籍员工3500元',\n      value: 3500,\n    }, {\n      text: '外籍员工4800元',\n      value: 4800,\n    }];\n    // 初始化picker\n    var _picker = new Picker({\n      data: [_taxData],\n      selectedIndex: [0],\n      title: '个税起征点'\n    });\n    // 用户选择值改变\n    _picker.on('picker.valuechange', function (selectedVal, selectedIndex) {\n      that.setValue($taxThreshold, _taxData, selectedIndex);\n      resultData.taxThreshold = selectedVal[0];\n    });\n\n    $taxThreshold.off().on('click', function () {\n      _picker.show();\n    });\n  };\n  wages.ssBase = function() {\n    var that = this;\n    var $ssBase = $('#ssBase');\n    // 初始化picker\n    var _picker = new Picker({\n      data: [ssData],\n      selectedIndex: [0],\n      title: '社保基数'\n    });\n    // 用户选择值改变\n    _picker.on('picker.valuechange', function (selectedVal, selectedIndex) {\n      that.setValue($ssBase, ssData, selectedIndex);\n      resultData.ssBase = selectedVal[0];\n    });\n\n    $ssBase.off().on('click', function () {\n      _picker.show();\n    });\n  };\n  wages.pfBase = function() {\n    var that = this;\n    var $pfBase = $('#pfBase');\n    // 初始化picker\n    var _picker = new Picker({\n      data: [pfData],\n      selectedIndex: [0],\n      title: '公积金基数'\n    });\n    // 用户选择值改变\n    _picker.on('picker.valuechange', function (selectedVal, selectedIndex) {\n      that.setValue($pfBase, pfData, selectedIndex);\n      resultData.pfBase = selectedVal[0];\n    });\n\n    $pfBase.off().on('click', function () {\n      _picker.show();\n    });\n  };\n  wages.grossPay = function() {\n    const that = this;\n    var _ssMini = 2130; // 社保最低标准\n    var _pfMini = 2030; // 公积金最低标准\n    var _ssHightest = 22440; // 社保最高标准\n    var _pfHightest = 37400; // 公积金最高标准\n    var $grossPay = $('#grossPay');\n    $grossPay.on('input', function() {\n      resultData.grossPay = $(this).val();\n    }).on('blur', function() {\n      var _val = $(this).val();\n      ssData = [{\n        text: `按统一标准缴纳${_val ? `(${_val > _ssMini ? (_val > _ssHightest ? _ssHightest : _val) : _ssMini })元` : ''}`,\n        value: 0,\n      }, {\n        text: `按最低标准缴纳${_val ? `(${_ssMini})元` : ''}`,\n        value: 1,\n      }];\n      pfData = [{\n        text: `按统一标准缴纳${_val ? `(${_val > _pfMini ? (_val > _pfHightest ? _pfHightest : _val) : _pfMini })元` : ''}`,\n        value: 0,\n      }, {\n        text: `按最低标准缴纳${_val ? `(${_pfMini})元` : ''}`,\n        value: 1,\n      }];\n      that.ssBase(); // 社保基数\n      that.pfBase(); // 公积金基数\n    })\n  }\n  wages.submit = function() {\n    var $submit = $('#submit');\n    $submit.on('click', function() {\n      if (!resultData.grossPay || resultData.grossPay <= 0) {\n        alert('请输入税前工资，大于0的整数');\n        return;\n      }\n      window.location.href=`wagesRes.html?params=${JSON.stringify(resultData)}`;\n    })\n  }\n  wages.init();\n});"]}