{"version":3,"sources":["calculator/js/businessLoanRes.js"],"names":["$","document","ready","r","_params","JSON","parse","RegExp","reg","getQueryString","name","substr","match","window","location","loanRes","calculateMethod","remove","this","recalculation","_baseMoney","totalLoan","housePrice","_housePrice","loanRate","loanTerm","res","equalAmountOfPrincipal","equalAmountOfInterest","totalInterest","_total","$detail","$summary","text","formatMoney","monthlyPayment","monthlyPaymentDecrease","children","repaymentMethod","find","on","init"],"mappings":"aAAAA,EAAEC,UAAUC,MAAM,WAOd,IAPFD,EACAE,EAMEC,EAAAC,KAAAC,OAPFL,EAAUC,IAAMK,OAAA,QAOd,SAPwB,gBAAA,KAEpBC,OADNL,EAASM,OAAAA,SAAeC,OAAMC,OAAA,GAAAC,MAAAJ,IAEpBK,SAAOC,EAAAA,IAEX,OAWNC,GAGAA,KAAe,WADXA,IACsB,IAA1BA,EAAAC,iBAA0BhB,EAAA,aAAAiB,SACxBC,KAAId,aAEFc,KAAAC,iBAGHJ,UAND,WAOA,IAAAK,EAAA,IAAAhB,EAAAiB,UACAN,EAAgC,IAAZX,EAAAkB,WAEdC,EAAAA,uBAAsBD,EAA1BlB,EAAAoB,SAAApB,EAAAqB,UAEIC,EAAMC,kBACVD,EAAAE,sBAAAR,EAAAhB,EAAAoB,SAAApB,EAAAqB,WAEEC,IAAAA,EAAM,IAAAE,EAAAA,gBAAkCxB,EAAkBA,EAAAA,cAA1DgB,EAAAM,EAAAG,cAEEC,EAAS1B,EAAAA,YAGT2B,EAAS/B,EAAE,WADfgC,EAAIA,KAAAA,iBAAJC,KAAAC,YAAAR,EAAAS,gBAAA,KACAH,EAAID,KAAS/B,SAAEiC,KAAf,IAAA7B,EAAAqB,SAAA,MACc,IAAdO,EAAAA,iBAA+BC,EAAQC,KAAAA,YAAgBC,KAAxBF,UAA/BC,YAAAR,EAAAU,wBAA+BH,KAC/BD,EAAAA,KAAA,cAAAK,SAAA,QAAgCjC,KAAQqB,YAAxCL,IACAhB,EAAQkC,KAAAA,kBAARD,SAAiCL,QAAcC,KAAAC,YAAdR,EAAAG,gBACjCE,EAAAA,UAAAM,SAAa,QAAcA,KAAAA,YAAiBJ,IACbI,IAA/BN,EAAAf,iBACEe,EAAFQ,KAAYF,aAAZA,SAAkCH,QAAAA,KAAYJ,YAA9CP,EAAAH,KAGCL,cAAA,WArBHf,EAAA,WAAAwC,GAAA,QAAA,WAuBAzB,OAAQI,QAAAA,WAGLJ,EAFD0B","file":"../../../calculator/js/businessLoanRes.js","sourcesContent":["$(document).ready(function(){\n  function getQueryString(name) {\n    var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');\n    var r = window.location.search.substr(1).match(reg);\n    if (r != null) {\n        return unescape(r[2]);\n    }\n    return null;\n  }\n  var _params = JSON.parse(getQueryString('params'));\n\n  // calculateMethod: 0, // 计算方式 (0:按房价总额 1:按贷款总额)\n  // housePrice: 0, // 房价总额\n  // totalLoan: 0, // 贷款总额\n  // loanTerm: 0, // 贷款年限\n  // loanRate: 0, // 贷款利率\n  // repaymentMethod: 0, // 还款方式(0:等额本金 1:等额本息)\n\n  var loanRes = {};\n  loanRes.init = function() {\n    if (_params) {\n      _params.calculateMethod === 1 && $('.firstPay').remove();\n      this.calculate(); // 计算\n    }\n    this.recalculation();\n  };\n  // 等额本金\n  loanRes.calculate = function () {\n    var _baseMoney = _params.totalLoan * 10000;\n    var _housePrice = _params.housePrice * 10000;\n    // 等额本金\n    var res = equalAmountOfPrincipal(_baseMoney, _params.loanRate, _params.loanTerm);\n    // 等额本息\n    if (_params.repaymentMethod) {\n      res = equalAmountOfInterest(_baseMoney, _params.loanRate, _params.loanTerm);\n    }\n    var _total = _params.calculateMethod === 0 ? (_housePrice + res.totalInterest) : (_baseMoney + res.totalInterest);\n\n    var $summary= $('.summary');\n    var $detail= $('.detail');\n    $summary.find('.summaryMoney').text(`${formatMoney(res.monthlyPayment)}元`);\n    $summary.find('.term').text(`（${_params.loanTerm}期）`);\n    _params.repaymentMethod === 0 && $summary.find('.remarks').text(`首期后每月递减${formatMoney(res.monthlyPaymentDecrease)}元`);\n    $detail.find('.totalLoan').children('span').text(formatMoney(_baseMoney));\n    $detail.find('.totalInterest').children('span').text(formatMoney(res.totalInterest));\n    $('.total').children('span').text(formatMoney(_total));\n    if (_params.calculateMethod === 0) {\n      $detail.find('.firstPay').children('span').text(formatMoney(_housePrice - _baseMoney));\n    }\n  }\n  loanRes.recalculation = function() {\n    $('#submit').on('click',function() {\n      window.history.back();\n    })\n  }\n  loanRes.init();\n});"]}