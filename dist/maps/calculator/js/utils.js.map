{"version":3,"sources":["calculator/js/utils.js"],"names":["equalAmountOfPrincipal","totalLoan","loanRate","loanTerm","monthlyPayment","_monthlyInterestrate","monthlyPaymentDecrease","_monthlyPaymentDecrease","equalAmountOfInterest","Math","pow","monthlyInterestrate","_monthlyPayment","formatMoney","num","MILLI_PATTERN","toString","replace","m"],"mappings":"aAOA,IAAIA,uBAAyB,SAASC,EAAWC,EAAUC,GAA3D,IAAIH,EAAyBE,EAAzBF,GAAAA,IAQF,OAGEI,eATEC,EAAuBH,EAA3BD,EAAAI,EAQAC,uBANuBL,EAADE,EAAyBF,EAO7CG,cALEG,GAA0BN,EAAYE,EAAWE,GAArDJ,EAAAE,IAAAA,EAAA,GAAA,EAAAF,EAAAE,GAAAF,IAkBEO,sBAAwB,SAASP,EAAWC,EAAUC,GAA1D,IAAIK,EAAwBN,EAAxBM,GAAAA,IAEEH,EAAAA,EAAuBH,EAA3BO,KAAAC,IAAA,EAAAL,EAAAF,IAAAM,KAAAC,IAAA,EAAAL,EAAAF,GAAA,GAGA,OACAQ,oBAAqBR,EACrBC,eAAOQ,EACLD,cAJEC,EAAmBX,EAAaI,IAJtCQ,YAAA,SAAAC,GAeE,IADED,EAAc,uBAEhB,OAAIE,GAAAA,EAAAA,QAAgB,GAAAC,WAGjBC,QAJiB,6BAIM,SAACC,GAAD,OAAOA,EAAED,QAAQF,EAAe","file":"../../../calculator/js/utils.js","sourcesContent":["/**\n * 等额本金\n * @param  {[number]} totalLoan     [贷款总额]\n * @param  {[number]} loanRate [年利率]\n * @param  {[number]} loanTerm [贷款期限（月）]\n * @return {[type]}          [description]\n */\nvar equalAmountOfPrincipal = function(totalLoan, loanRate, loanTerm) {\n  // 月利率\n  var _monthlyInterestrate = loanRate / 12 / 100;\n  // 每月月供额=(贷款本金÷还款月数)+(贷款本金-已归还本金累计额)×月利率\n  var _monthlyPayment = (totalLoan / loanTerm) + totalLoan * _monthlyInterestrate;\n  // 每月月供递减额=每月应还本金×月利率=贷款本金÷还款月数×月利率\n  var _monthlyPaymentDecrease = totalLoan / loanTerm * _monthlyInterestrate;\n  // 总利息=还款月数×(总贷款额×月利率-月利率×(总贷款额÷还款月数)*(还款月数-1)÷2+总贷款额÷还款月数)\n  var _totalInterest = loanTerm * (totalLoan * _monthlyInterestrate - _monthlyInterestrate * (totalLoan / loanTerm) * (loanTerm - 1) / 2 + totalLoan / loanTerm) - totalLoan;\n\n  return {\n    monthlyPayment: _monthlyPayment,\n    monthlyPaymentDecrease: _monthlyPaymentDecrease,\n    totalInterest: _totalInterest,\n  }\n}\n\n/**\n * 等额本息\n * @param  {[number]} totalLoan [贷款总额]\n * @param  {[number]} loanRate  [年利率]\n * @param  {[number]} loanTerm  [贷款期限（月）]\n * @return {[type]}           [description]\n */\nvar equalAmountOfInterest = function(totalLoan, loanRate, loanTerm) {\n  // 月利率\n  var _monthlyInterestrate = loanRate / 12 / 100;\n  // 月供\n  var _monthlyPayment = (totalLoan * (_monthlyInterestrate) * Math.pow((1 + (_monthlyInterestrate)), loanTerm)) / (Math.pow((1 + (_monthlyInterestrate)), loanTerm) - 1);\n  // 利息总额\n  var _totalInterest = loanTerm * _monthlyPayment - totalLoan;\n  return {\n    monthlyInterestrate: _monthlyInterestrate,\n    monthlyPayment: _monthlyPayment,\n    totalInterest: _totalInterest,\n  }\n}\n\nvar formatMoney = function(num) {\n  var DIGIT_PATTERN = /(^|\\s)\\d+(?=\\.?\\d*($|\\s))/g;\n  var MILLI_PATTERN = /(?=(?!\\b)(\\d{3})+$)/g;\n\n  return num && (num.toFixed(2)).toString()\n    .replace(DIGIT_PATTERN, (m) => m.replace(MILLI_PATTERN, ','));\n}"]}