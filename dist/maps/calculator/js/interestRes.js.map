{"version":3,"sources":["calculator/js/interestRes.js"],"names":["$","document","ready","r","_params","JSON","parse","RegExp","reg","getQueryString","name","substr","match","window","location","interestRes","this","recalculation","_monthlyInterestrate","lendingRateType","lendingRateNum","res","equalAmountOfPrincipal","equalAmountOfInterest","loanAccount","loanTerm","$summary","$detail","text","formatMoney","monthlyPayment","children","Number","repaymentMethod","totalInterest","on","init"],"mappings":"aAAAA,EAAEC,UAAUC,MAAM,WAOd,IAPFD,EACAE,EAMEC,EAAAC,KAAAC,OAPFL,EAAUC,IAAMK,OAAA,QAOd,SAPwB,gBAAA,KAEpBC,OADNL,EAASM,OAAAA,SAAeC,OAAMC,OAAA,GAAAC,MAAAJ,IAEpBK,SAAOC,EAAAA,IAEX,OAUNC,GAGAA,KAAmB,WADfA,GACJA,KAAAA,YAEIC,KAAAC,iBAEFF,UAAsB,WAJxB,IAAAG,EAAA,IAAAd,EAAAe,gBAAAf,EAAAgB,eAAA,GAAAhB,EAAAgB,eAOMF,EAAAA,uBAAuBd,EAAQe,YAARD,EAAwCE,EAAiBhB,UAEhFiB,EAAMC,kBACVD,EAAAE,sBAAAnB,EAAAoB,YAAAN,EAAAd,EAAAqB,WAGC,IAAAC,EAAA1B,EAAA,YAGG2B,EAAS3B,EAAE,WADf0B,EAAIA,KAAAA,iBAAJE,KAAAC,YAAAR,EAAAS,gBAAA,KACAJ,EAAIC,KAAS3B,SAAE4B,KAAf,IAAAxB,EAAAqB,SAAA,MACc,IAAdC,EAAAA,iBAA+BE,EAAQC,KAAAA,YAAgBC,SACvDJ,EAAAA,KAAA,cAAAK,SAAA,QAAgC3B,KAAQqB,YAAxCO,OAAA5B,EAAAoB,eACApB,EAAQ6B,KAAAA,kBAARF,SAAiCL,QAAcE,KAAAC,YAAdR,EAAjCa,gBACAP,EAAAA,UAAAI,SAAa,QAAcA,KAAAA,YAAiBH,OAAKC,EAAYG,aAAeR,EAAAA,iBAE5ExB,cAAqB,WAhBvBA,EAAA,WAAAmC,GAAA,QAAA,WAkBApB,OAAAA,QAAYE,WAGTF,EAFDqB","file":"../../../calculator/js/interestRes.js","sourcesContent":["$(document).ready(function(){\n  function getQueryString(name) {\n    var reg = new RegExp('(^|&)' + name + '=([^&]*)(&|$)', 'i');\n    var r = window.location.search.substr(1).match(reg);\n    if (r != null) {\n        return unescape(r[2]);\n    }\n    return null;\n  }\n  var _params = JSON.parse(getQueryString('params'));\n\n  // loanTerm 贷款期限(月数)\n  // lendingRateNum 贷款利率\n  // lendingRateType 贷款利率类型0年、1月）\n  // repaymentMethod 还款方式 0等额本金 1等额本息\n  // loanAccount 贷款金额\n\n  var interestRes = {};\n  interestRes.init = function() {\n    if (_params) {\n      this.calculate(); // 计算\n    }\n    this.recalculation(); // 重新计算\n  }\n  interestRes.calculate = function() {\n    var _monthlyInterestrate = _params.lendingRateType === 0 ? _params.lendingRateNum : _params.lendingRateNum * 12;\n    // 等额本金\n    var res = equalAmountOfPrincipal(_params.loanAccount, _monthlyInterestrate , _params.loanTerm);\n    // 等额本息\n    if (_params.repaymentMethod) {\n      res = equalAmountOfInterest(_params.loanAccount, _monthlyInterestrate , _params.loanTerm);\n    }\n\n    var $summary= $('.summary');\n    var $detail= $('.detail');\n    $summary.find('.summaryMoney').text(`${formatMoney(res.monthlyPayment)}元`);\n    $summary.find('.term').text(`（${_params.loanTerm}期）`);\n    _params.repaymentMethod === 1 && $summary.find('.remarks').remove();\n    $detail.find('.totalLoan').children('span').text(formatMoney(Number(_params.loanAccount)));\n    $detail.find('.totalInterest').children('span').text(formatMoney(res.totalInterest));\n    $('.total').children('span').text(formatMoney(Number(_params.loanAccount) + res.totalInterest));\n  }\n  interestRes.recalculation = function() {\n    $('#submit').on('click',function() {\n      window.history.back();\n    })\n  }\n  interestRes.init();\n});"]}