{"version":3,"sources":["calculator/js/accumulationLoan.js"],"names":["$","document","ready","resultData","housePrice","calculateMethod","totalLoan","loanTerm","repaymentMethod","accumulationLoan","this","$loanTerm","i","_data","text","push","_picker","Picker","data","selectedIndex","on","selectedVal","_innerText","show","$calculateMethod","value","find","hide","$repaymentMethod","handleInput","_id","attr","$this","val","submit","$submit","alert","loanRate","JSON","stringify","init"],"mappings":"aAAAA,EAAEC,UAAUC,MAAM,WAChB,IAAIC,GADJF,gBAAgB,EAChBG,WAAID,EACFE,UAAAA,EACAD,SAAAA,IACAE,SAAAA,KACAC,gBAAe,GAEfC,GANeC,KAAjB,WAQAC,KAAID,kBACJA,KAAAA,kBACEC,KAAKF,WACLE,KAAKL,cACLK,KAAKH,UAELE,SAAe,WAGf,IARF,IAAAE,EAAAX,EAAA,aAOAS,KACME,EAAAA,EAAYX,GAAE,GAAAY,IAClBC,EAAIA,MACJC,KAAaF,EAAb,KAAA,GAAgBA,EAAhB,KACEC,MAAW,GAALE,IAIP,IAAAC,EAAA,IAAAC,QACDC,MAAAL,GACAM,eAAkBF,IAChBC,MAAOL,SADgBG,EAAzBI,GAAA,qBAAA,SAAAC,EAAAF,GAKA,IAAAG,EAAAT,EAAAM,EAAA,IAAAL,KACAE,EAAWT,SAAAc,EAAsB,GAC/BV,EAAIW,KAAAA,UAAmBH,KAAAA,KAGxBR,EAJDS,GAAA,QAAA,WAOEJ,EAAQO,UACTd,gBAFD,WAtBF,IAAAe,EAAAxB,EAAA,oBA0BAS,IACEK,KAAIU,QACJC,MAAIZ,IAEFY,KAAAA,QAFUA,MAGT,IAHHT,EAAA,IAAAC,QAOAC,MAAAL,GACAM,eAAkBF,GAChBC,MAAOL,SADgBG,EAAzBI,GAAA,qBAAA,SAAAC,EAAAF,GAKA,IAAAG,EAAAA,GAAAT,EAAAM,EAAA,IAAAL,KACAE,EAAWX,gBAAXc,EAA2CE,GACzCG,EAAIF,KAAgBT,UAAMM,KAAAA,GACfd,IAAXF,EAAWE,GACXmB,EAAAA,eAAiBE,OAEf1B,EAAE,eAAe2B,SAIpBH,EATDJ,GAAA,QAAA,WAYEJ,EAAQO,UACTd,gBAFD,WA3BF,IAAAmB,EAAA5B,EAAA,oBA+BAS,IACEK,KAAIc,OACJH,MAAIZ,IAEFY,KAAAA,OAFUA,MAGT,IAHHT,EAAA,IAAAC,QAOAC,MAAAL,GACAM,eAAkBF,GAChBC,MAAOL,SADgBG,EAAzBI,GAAA,qBAAA,SAAAC,EAAAF,GAKA,IAAAG,EAAAA,GAAAT,EAAAM,EAAA,IAAAL,KACAE,EAAWR,gBAAXW,EAA2CE,GACzCO,EAAIN,KAAgBT,UAAMM,KAAAA,KAG3BS,EAJDR,GAAA,QAAA,WAOEJ,EAAQO,UACTd,YAFD,WAtBFT,EAAA,QAAA0B,KAAA,SAAAN,GAAA,QAAA,WA0BAX,IAAAA,EAAAA,EAAiBoB,MACbC,EAAQJ,EAAKK,KAAf,MACE5B,EAAI6B,GAAQA,EAAZC,SAGDxB,OAJD,WADFT,EAAA,WAOAS,GAAAA,QAAiByB,WACf,IAAIC,EAAY9B,iBAAhBF,EAAAC,cAAAD,EAAAC,YAAA,IAIID,EAAAG,WAAAH,EAAAG,WAAA,EACD8B,MAAA,mBAGCjC,EAAAkC,UAAA,GAAAlC,EAAAkC,UAAA,IACDD,MAAA,uBAGCjC,EAAAkC,WACDlC,EAAAkC,SAAA,MAEClC,OAAAA,SAAWkC,KAAXlC,+BAAAmC,KAAAC,UAAApC,IAdJgC,MAAA,sBAiBC1B,EAjBD+B","file":"../../../calculator/js/accumulationLoan.js","sourcesContent":["$(document).ready(function(){\n  var resultData = {\n    calculateMethod: 0, // 计算方式\n    housePrice: 0, // 房价总额\n    totalLoan: 0, // 贷款总额\n    loanTerm: 300, // 贷款期限\n    loanRate: 3.25, // 贷款利率\n    repaymentMethod: 0, // repaymentMethod\n  };\n  var accumulationLoan = {};\n  accumulationLoan.init = function() {\n    this.repaymentMethod(); // 还款方式\n    this.calculateMethod(); // 计算方式\n    this.loanTerm(); // 贷款年限\n    this.handleInput();\n    this.submit(); // 提交\n  };\n  accumulationLoan.loanTerm = function() {\n    var $loanTerm = $('#loanTerm');\n    var _data = [];\n    for (var i = 1; i <= 25; i++) {\n      _data.push({\n        text: `${i}年(${i * 12}期)`,\n        value: i * 12,\n      })\n    }\n    // 初始化picker\n    var _picker = new Picker({\n      data: [_data],\n      selectedIndex: [24],\n      title: '计算方式'\n    });\n    // 用户选择值改变\n    _picker.on('picker.valuechange', function (selectedVal, selectedIndex) {\n      var _innerText = _data[selectedIndex[0]].text;\n      resultData.loanTerm = selectedVal[0];\n      $loanTerm.find('.value').text(_innerText);\n    });\n\n    $loanTerm.on('click', function () {\n      _picker.show();\n    });\n  };\n  accumulationLoan.calculateMethod = function() {\n    var $calculateMethod = $('#calculateMethod');\n    var _data = [{\n      text: '按房价总额',\n      value: 0,\n    }, {\n      text: '按贷款总额',\n      value: 1,\n    }]\n    // 初始化picker\n    var _picker = new Picker({\n      data: [_data],\n      selectedIndex: [0],\n      title: '计算方式'\n    });\n    // 用户选择值改变\n    _picker.on('picker.valuechange', function (selectedVal, selectedIndex) {\n      var _innerText = `${_data[selectedIndex[0]].text}`;\n      resultData.calculateMethod = selectedIndex[0];\n      $calculateMethod.find('.value').text(_innerText);\n      if (selectedIndex[0] === 1) {\n        $('.housePrice').hide();\n      } else {\n        $('.housePrice').show();\n      }\n    });\n\n    $calculateMethod.on('click', function () {\n      _picker.show();\n    });\n  };\n  accumulationLoan.repaymentMethod = function() {\n    var $repaymentMethod = $('#repaymentMethod');\n    var _data = [{\n      text: '等额本金',\n      value: 0,\n    }, {\n      text: '等额本息',\n      value: 1,\n    }]\n    // 初始化picker\n    var _picker = new Picker({\n      data: [_data],\n      selectedIndex: [0],\n      title: '还款方式'\n    });\n    // 用户选择值改变\n    _picker.on('picker.valuechange', function (selectedVal, selectedIndex) {\n      var _innerText = `${_data[selectedIndex[0]].text}`;\n      resultData.repaymentMethod = selectedIndex[0];\n      $repaymentMethod.find('.value').text(_innerText);\n    });\n\n    $repaymentMethod.on('click', function () {\n      _picker.show();\n    });\n  };\n  accumulationLoan.handleInput = function() {\n    $('.ipt').find('input').on('input', function() {\n      var $this = $(this);\n      var _id = $this.attr('id');\n      resultData[_id] = $this.val();\n    })\n  }\n  accumulationLoan.submit = function() {\n    var $submit = $('#submit');\n    $submit.on('click', function() {\n      if (resultData.calculateMethod === 0 && (!resultData.housePrice || resultData.housePrice <= 0)) {\n        alert('请输入房价总额，大于0的整数');\n        return;\n      }\n      if (!resultData.totalLoan || resultData.totalLoan <= 0) {\n        alert('请输入贷款总额, 大于0的整数');\n        return;\n      }\n      if (resultData.loanRate <= 0 || resultData.loanRate >= 100) {\n        alert('请输入贷款利率, 0-99.99之间');\n        return;\n      }\n      if (!resultData.loanRate) {\n        resultData.loanRate = 3.25;\n      }\n      window.location.href=`businessLoanRes.html?params=${JSON.stringify(resultData)}`;\n    })\n  }\n  accumulationLoan.init();\n});"]}